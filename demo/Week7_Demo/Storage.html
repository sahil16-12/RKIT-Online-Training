<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Storage Demo â€“ localStorage & sessionStorage</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        padding: 20px;
        transition: background-color 0.3s, color 0.3s;
      }

      .card {
        border: 1px solid #ccc;
        border-radius: 8px;
        padding: 16px;
        margin-bottom: 16px;
      }

      .label {
        font-weight: bold;
      }

      input {
        padding: 6px;
        margin-top: 4px;
        margin-bottom: 8px;
      }

      button {
        padding: 6px 12px;
        margin-top: 4px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
      }

      .btn-primary {
        background-color: #007bff;
        color: white;
      }

      .btn-secondary {
        background-color: #6c757d;
        color: white;
      }

      .small-text {
        font-size: 13px;
        color: #555;
      }
    </style>
  </head>
  <body>
    <h1>JavaScript Storage Demo</h1>

    <!-- ===========================
       1) Save username in localStorage
  ============================ -->
    <div class="card">
      <div class="label">1) Save username (localStorage)</div>
      <p class="small-text">
        We will store your username so that when you refresh the page, it
        remembers it.
      </p>

      <input type="text" id="username-input" placeholder="Enter your name..." />
      <br />
      <button id="save-username-btn" class="btn-primary">Save Name</button>
      <button id="clear-username-btn" class="btn-secondary">
        Clear Stored Name
      </button>

      <p id="greeting-text">No name stored yet.</p>
    </div>

    <!-- ===========================
       2) Theme preference using localStorage
  ============================ -->
    <div class="card">
      <div class="label">2) Theme toggle (localStorage)</div>
      <p class="small-text">
        Click to toggle light/dark theme. Your choice will be stored and kept on
        refresh.
      </p>

      <button id="toggle-theme-btn" class="btn-primary">Toggle Theme</button>

      <p id="theme-status" class="small-text">Current theme: Light (default)</p>
    </div>

    <!-- ===========================
       3) Click counter using sessionStorage
  ============================ -->
    <div class="card">
      <div class="label">3) Session click counter (sessionStorage)</div>
      <p class="small-text">
        Counts how many times you clicked this button in THIS TAB only. If you
        close the tab, counter resets.
      </p>

      <button id="session-click-btn" class="btn-primary">
        Click me in this tab
      </button>

      <p id="session-count-text">You have clicked 0 times in this tab.</p>
    </div>

    <script>
      // Helper: Apply theme to body
      function applyTheme(theme) {
        if (theme === "dark") {
          document.body.style.backgroundColor = "#222";
          document.body.style.color = "#f5f5f5";
        } else {
          // default light theme
          document.body.style.backgroundColor = "#ffffff";
          document.body.style.color = "#000000";
        }
      }

      // 1) Username with localStorage
      const usernameInput = document.getElementById("username-input");
      const saveUsernameBtn = document.getElementById("save-username-btn");
      const clearUsernameBtn = document.getElementById("clear-username-btn");
      const greetingText = document.getElementById("greeting-text");

      // On page load, check if we already have a stored username
      const storedName = localStorage.getItem("username");

      if (storedName !== null) {
        // If name exists, show a friendly greeting
        greetingText.textContent = "Welcome back, " + storedName + " ðŸ‘‹";
      }

      // When user clicks "Save Name"
      saveUsernameBtn.addEventListener("click", function () {
        const name = usernameInput.value.trim();

        if (name === "") {
          greetingText.textContent = "Please enter a non-empty name.";
          return;
        }

        // Save in localStorage
        localStorage.setItem("username", name);
        greetingText.textContent =
          "Saved! Hello, " + name + " ðŸ˜Š (try refreshing the page)";
      });

      // When user clicks "Clear Stored Name"
      clearUsernameBtn.addEventListener("click", function () {
        localStorage.removeItem("username");
        greetingText.textContent = "Stored name cleared. No name stored yet.";
        usernameInput.value = "";
      });

      // 2) Theme preference with localStorage
      const toggleThemeBtn = document.getElementById("toggle-theme-btn");
      const themeStatus = document.getElementById("theme-status");

      // On page load, check stored theme
      let currentTheme = localStorage.getItem("theme");

      if (!currentTheme) {
        // If nothing stored, default to "light"
        currentTheme = "light";
      }

      // Apply theme on initial load
      applyTheme(currentTheme);
      themeStatus.textContent = "Current theme: " + currentTheme.toUpperCase();

      // On button click, toggle between light and dark
      toggleThemeBtn.addEventListener("click", function () {
        // Flip theme
        currentTheme = currentTheme === "light" ? "dark" : "light";

        // Save new theme in localStorage
        localStorage.setItem("theme", currentTheme);

        // Apply
        applyTheme(currentTheme);
        themeStatus.textContent =
          "Current theme: " + currentTheme.toUpperCase();
      });

      // 3) Click counter with sessionStorage
      const sessionClickBtn = document.getElementById("session-click-btn");
      const sessionCountText = document.getElementById("session-count-text");

      // Get existing count, or start at 0
      let clickCount = Number(sessionStorage.getItem("clickCount") || 0);

      // Show initial value
      sessionCountText.textContent =
        "You have clicked " + clickCount + " times in this tab.";

      // On button click, increase and store
      sessionClickBtn.addEventListener("click", function () {
        clickCount++;
        sessionStorage.setItem("clickCount", String(clickCount));

        sessionCountText.textContent =
          "You have clicked " + clickCount + " times in this tab.";
      });
    </script>
  </body>
</html>
