<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Events Demo: onclick, onchange, addEventListener, Bubbling</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        padding: 20px;
      }

      .box {
        padding: 15px;
        margin-top: 20px;
        border: 2px solid #333;
        border-radius: 8px;
      }

      #outer {
        background-color: #f5f5f5;
      }

      #inner {
        background-color: #e0f7fa;
        margin-top: 10px;
      }

      #bubble-button {
        margin-top: 10px;
        padding: 8px 12px;
        border: none;
        cursor: pointer;
        border-radius: 4px;
        background-color: #007bff;
        color: white;
      }

      .section-title {
        margin-top: 30px;
        font-size: 18px;
        font-weight: bold;
      }

      input,
      select {
        padding: 6px;
        margin: 4px 0;
      }

      .log {
        margin-top: 10px;
        padding: 10px;
        border-radius: 6px;
        background-color: #f0f0f0;
        min-height: 24px;
        font-size: 14px;
      }
    </style>
  </head>
  <body>
    <h1>JavaScript Events Demo</h1>

    <div class="section-title">1) onclick examples</div>

    <!-- Inline onclick -->
    <button onclick="alert('Inline onclick: Button clicked!')">
      Inline onclick Button
    </button>

    <!-- We'll attach onclick using JS below -->
    <button id="js-onclick-btn">JS onclick Button</button>

    <div class="section-title">2) onchange examples</div>

    <label>
      Username (onchange fires when you leave the field):
      <input type="text" id="username-input" placeholder="Type something..." />
    </label>

    <br />

    <label>
      Favorite language (onchange fires when you select):
      <select id="language-select">
        <option value="">-- Choose one --</option>
        <option value="js">JavaScript</option>
        <option value="py">Python</option>
        <option value="java">Java</option>
      </select>
    </label>

    <div id="change-log" class="log">onchange messages will appear here...</div>

    <div class="section-title">3) addEventListener example</div>

    <button id="multi-listener-btn">Click me (multiple listeners)</button>

    <div id="listener-log" class="log">
      addEventListener logs will appear here...
    </div>

    <div class="section-title">4) Event bubbling example</div>

    <p>
      Click the button inside the nested boxes below and watch the console or
      the log. We'll show how the event moves from inner â†’ outer.
    </p>

    <div id="outer" class="box">
      Outer DIV
      <div id="inner" class="box">
        Inner DIV
        <button id="bubble-button">Click me (bubbling demo)</button>
      </div>
    </div>

    <div id="bubble-log" class="log">
      Event bubbling logs will appear here...
    </div>

    <script>
      // Helper function to log messages in a div
      function logMessage(element, message) {
        element.textContent = message;
        console.log(message);
      }

      // 1) onclick examples
      const jsOnclickBtn = document.getElementById("js-onclick-btn");

      // Here we use the onclick PROPERTY in JS (not inline HTML).
      jsOnclickBtn.onclick = function () {
        alert("JS onclick: Button clicked!");
      };

      // If we do this again, it will overwrite the previous function:
      // jsOnclickBtn.onclick = function () {
      //   alert("This overwrote the previous onclick handler!");
      // };

      // 2) onchange examples
      const usernameInput = document.getElementById("username-input");
      const languageSelect = document.getElementById("language-select");
      const changeLog = document.getElementById("change-log");

      // When user changes the text and then clicks somewhere else
      usernameInput.onchange = function () {
        const value = usernameInput.value.trim();
        if (value === "") {
          logMessage(changeLog, "Username cleared or empty.");
        } else {
          logMessage(changeLog, "Username changed to: " + value);
        }
      };

      // When user selects a different option in dropdown
      languageSelect.onchange = function () {
        const value = languageSelect.value;
        if (value === "") {
          logMessage(changeLog, "No language selected.");
        } else if (value === "js") {
          logMessage(changeLog, "You selected JavaScript.");
        } else if (value === "py") {
          logMessage(changeLog, "You selected Python.");
        } else if (value === "java") {
          logMessage(changeLog, "You selected Java.");
        }
      };

      // 3) addEventListener example
      const multiListenerBtn = document.getElementById("multi-listener-btn");
      const listenerLog = document.getElementById("listener-log");

      // First listener
      multiListenerBtn.addEventListener("click", function () {
        logMessage(listenerLog, "First listener: Button clicked.");
      });

      // Second listener (yes, both will run)
      multiListenerBtn.addEventListener("click", function () {
        console.log("Second listener: Doing another action.");
        // We'll not overwrite the first one, both will execute.
      });

      // You could even add a third listener if you want:
      function thirdListener() {
        console.log("Third listener: This could be removed later.");
      }

      multiListenerBtn.addEventListener("click", thirdListener);

      // Example: removing a listener after 5 seconds
      setTimeout(() => {
        multiListenerBtn.removeEventListener("click", thirdListener);
        console.log("Third listener removed after 5 seconds.");
      }, 5000);

      // 4) Event Bubbling example
      const outer = document.getElementById("outer");
      const inner = document.getElementById("inner");
      const bubbleButton = document.getElementById("bubble-button");
      const bubbleLog = document.getElementById("bubble-log");

      // Click on outer box
      outer.addEventListener("click", function () {
        logMessage(bubbleLog, "Outer DIV handler triggered (bubbled up here).");
      });

      // Click on inner box
      inner.addEventListener("click", function () {
        logMessage(bubbleLog, "Inner DIV handler triggered.");
        // Note: we are NOT stopping propagation here,
        // so the event will continue bubbling to outer.
      });

      // Click on button
      bubbleButton.addEventListener("click", function (event) {
        logMessage(bubbleLog, "Button handler triggered.");
        // Uncomment this line to stop the event from reaching inner/outer:
        // event.stopPropagation();
      });
    </script>
  </body>
</html>
